{% extends "base.html" %}
{% block content %}
<div class="container">
    <a href="{{ url_for('main.view_board', board_id=board.id) }}">&larr; Back to Board</a>
    <h2 style="margin-top: 1rem;">Manage Members for: {{ board.name }}</h2>

    <div class="form-container" style="max-width: none; margin: 1rem 0;">
        <form method="POST" action="">
            {{ form.hidden_tag() }}
            <fieldset>
                <legend>Invite New Member</legend>
                <div>
                    {{ form.email.label }}
                    {{ form.email() }}
                    {% if form.email.errors %}
                        <div class="errors">
                            {% for error in form.email.errors %}
                                <span>{{ error }}</span>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
            </fieldset>
            <div>
                {{ form.submit() }}
            </div>
        </form>
    </div>

    <div id="members-container">
        <h3>Current Members</h3>
        <div class="board-list">
            <div class="board-list-item">
                <strong>{{ board.owner.username }}</strong> ({{ board.owner.email }})
                <small>Owner</small>
            </div>
            {% if members %}
                {% for user in members %}
                    <div class="board-list-item">
                        <strong>{{ user.username }}</strong> ({{ user.email }})
                        <form method="POST" action="{{ url_for('main.remove_member', board_id=board.id, user_id=user.id) }}"
                              onsubmit="return confirm('Are you sure you want to remove {{ user.username }} from this board?');">
                            <button type="submit" class="btn-delete">Remove</button>
                        </form>
                    </div>
                {% endfor %}
            {% else %}
                <p>You haven't invited any members yet.</p>
            {% endif %}
        </div>
    </div>

</div>
{% endblock content %}